webpackJsonp([38],{"+bpR":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("xH+J"),i=n("g9mn"),o=!1;var r=function(t){o||n("lfO5")},s=n("VU/8")(a.a,i.a,!1,r,"data-v-24cd859c",null);s.options.__file="pages\\index\\tai-khoan\\dang-nhap.vue",e.default=s.exports},aFFn:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".buttonLogin[data-v-24cd859c]{background-color:#4caf50;width:100%;padding:8px;border:0;color:#fff;font-family:Open Sans}.buttonLogin[data-v-24cd859c]:hover{opacity:.96}label[data-v-24cd859c]:hover{text-decoration:unset}",""])},g9mn:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-align:center; padding-top:40px;"},[n("div",{staticClass:"box",staticStyle:{padding:"20px","max-width":"450px","min-height":"200px",margin:"auto","margin-top":"40px"}},[n("p",{staticStyle:{"font-size":"24px"}},[t._v("ĐĂNG NHẬP")]),n("span",{staticStyle:{"font-size":"14px"}},[t._v("Điền đầy đủ thông tin *."),n("br"),t._v(" Nếu bạn chưa có tài khoản, nhấn "),n("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"javascript:;"},on:{click:function(e){t.$router.push("/tai-khoan/dang-ky")}}},[t._v("vào đây")])]),t._v("\n        để đăng ký\n        "),n("form",{staticStyle:{"margin-top":"30px"},on:{submit:function(e){t.m_tryLogin(e)}}},[n("label",{staticStyle:{"font-weight":"bold"}},[t._v("Tài khoản *")]),n("el-input",{model:{value:t.form.login.email,callback:function(e){t.$set(t.form.login,"email",e)},expression:"form.login.email"}},[n("i",{staticClass:"el-input__icon el-icon-message",attrs:{slot:"prefix"},slot:"prefix"})]),n("label",{staticStyle:{"margin-top":"15px","font-weight":"bold"}},[t._v("Mật khẩu *")]),n("el-input",{attrs:{type:"password"},model:{value:t.form.login.password,callback:function(e){t.$set(t.form.login,"password",e)},expression:"form.login.password"}},[n("i",{staticClass:"el-input__icon el-icon-edit",attrs:{slot:"prefix"},slot:"prefix"})]),n("div",{staticStyle:{height:"30px","margin-top":"20px","margin-bottom":"10px"}},[n("span",{staticStyle:{"font-size":"14px"}},[n("el-checkbox",{staticClass:"pull-left",model:{value:t.v.saveAccount,callback:function(e){t.$set(t.v,"saveAccount",e)},expression:"v.saveAccount"}}),t._v(" Nhớ tài khoản")],1),n("a",{staticClass:"pull-right",attrs:{href:"javascript:;"},on:{click:function(e){t.$router.push("/tai-khoan/quen-mat-khau")}}},[t._v("Quên mật\n                    khẩu?")])]),n("grebtn",{attrs:{title:"ĐĂNG NHẬP",type:"submit",loading:t.v.isLoading}}),n("br"),n("label",{staticStyle:{"margin-top":"20px","font-weight":"bold"}},[t._v("Đăng nhập bằng")]),n("div",[t._v("\n                .etc\n            ")])],1)])])};a._withStripped=!0;var i={render:a,staticRenderFns:[]};e.a=i},lfO5:function(t,e,n){var a=n("aFFn");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("273b4b4c",a,!1)},"xH+J":function(t,e,n){"use strict";var a=n("Xxa5"),i=n.n(a),o=n("exGp"),r=n.n(o),s=n("4MaG"),l=n.n(s);e.a={middleware:"checkLoginClient",head:function(){return{title:"Đăng nhập | Spadi.vn - Trang đăng nhập tại Spadi.vn"}},name:"dang-nhap",asyncData:function(){return{}},data:function(){return{v:{saveAccount:!1,isLoading:!1},form:{login:{email:"",password:""}}}},methods:{m_tryLogin:function(t){var e=this;t.preventDefault(),this.v.isLoading=!0,this.$http.post("http://192.168.31.199:8000/api/user/authenticate",this.form.login,{headers:{"Content-Type":"application/json"}}).then(function(t){e.v.isLoading=!1;var n,a=t.body;if("user"===a.role||"manager"===a.role){var o={name:a.name,email:a.email,role:a.role};e.setCookie("ClientRole",a.role),e.setCookie("ClientToken",a.token),l.a.encode("spadivn_x",o,(n=r()(i.a.mark(function t(n,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=8;break}return e.setCookie("ClientInfo",r),t.next=4,e.$store.commit("updateClientToken",a.token);case 4:return t.next=6,e.$store.commit("updateClientInfo",o);case 6:return t.next=8,e.$store.commit("updateClientRole",a.role);case 8:case"end":return t.stop()}},t,e)})),function(t,e){return n.apply(this,arguments)})),e.$router.push(e.$route.query.redirect||"/tai-khoan/")}}).catch(function(t){e.v.isLoading=!1,e.$message({type:"error",message:void 0!==t.body&&void 0!==t.body.ErrorMessage?t.body.ErrorMessage:"Đã xảy ra sự cố, vui lòng kiểm tra và thử lại sau"})})}}}}});