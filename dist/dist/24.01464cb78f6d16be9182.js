webpackJsonp([24],{"4Lai":function(t,i,a){var n=a("P84k");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("228aa584",n,!1)},JwKv:function(t,i,a){"use strict";var n=a("g/wM"),e=a("mKXO"),o=!1;var s=function(t){o||a("4Lai")},r=a("VU/8")(n.a,e.a,!1,s,"data-v-6f7dab1a",null);r.options.__file="components\\button.vue",i.a=r.exports},P84k:function(t,i,a){(t.exports=a("FZ+f")(!1)).push([t.i,"button[data-v-6f7dab1a]{border:0;color:#fff;font-size:16px;padding:8px 16px;outline:none;background-color:#ff5151;min-width:86px;-webkit-transition:all .6s ease-in-out;transition:all .6s ease-in-out}button[data-v-6f7dab1a]:hover{background-color:#ff6262}.icon-e[data-v-6f7dab1a]{background-color:#fff;border-radius:50vh;width:10px;height:10px;float:left;padding:10px}.e1[data-v-6f7dab1a]{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.e1[data-v-6f7dab1a],.e2[data-v-6f7dab1a]{-webkit-animation-name:abLoad-data-v-6f7dab1a;animation-name:abLoad-data-v-6f7dab1a;-webkit-animation-duration:2s;animation-duration:2s}.e2[data-v-6f7dab1a]{-webkit-animation-delay:.3s;animation-delay:.3s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.e3[data-v-6f7dab1a]{-webkit-animation-name:abLoad-data-v-6f7dab1a;animation-name:abLoad-data-v-6f7dab1a;-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-delay:.6s;animation-delay:.6s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes abLoad-data-v-6f7dab1a{0%{padding:0}20%{padding:10px}to{padding:0}}@keyframes abLoad-data-v-6f7dab1a{0%{padding:0}20%{padding:10px}to{padding:0}}",""])},T1ID:function(t,i,a){var n=a("iTKt");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("f0dc7744",n,!1)},fWpv:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=a("uFzi"),e=a("w7sp"),o=!1;var s=function(t){o||a("T1ID")},r=a("VU/8")(n.a,e.a,!1,s,"data-v-b10e9014",null);r.options.__file="pages\\index\\tai-khoan\\index\\shop\\cap-nhat.vue",i.default=r.exports},"g/wM":function(t,i,a){"use strict";i.a={name:"priBtn",props:{loading:{type:Boolean,default:!1},title:{type:String,default:"Button"},type:{type:String,default:"button"},noRound:{type:Boolean,default:!1}},data:function(){return{}},methods:{m_emitParent:function(){this.$emit("click")}}}},iTKt:function(t,i,a){(t.exports=a("FZ+f")(!1)).push([t.i,".gmap-button-pickCurrentLocation[data-v-b10e9014]{background-color:#fff;text-transform:uppercase;font-size:12px;border:0;margin-left:120px;border-radius:2px;-webkit-box-shadow:-2px 2px 3px rgba(45,45,48,.1);box-shadow:-2px 2px 3px rgba(45,45,48,.1);padding:6px 10px;margin-top:10px;color:#ff5151;outline:0}.gmap-button-pickCurrentLocation[data-v-b10e9014]:active,.gmap-button-pickCurrentLocation[data-v-b10e9014]:hover{background-color:#f5f5f5}.button-icon-copy[data-v-b10e9014]{font-size:18px;color:rgba(45,45,48,.2);cursor:pointer}.button-icon-copy[data-v-b10e9014]:active,.button-icon-copy[data-v-b10e9014]:hover{color:rgba(45,45,48,.8)}",""])},mKXO:function(t,i,a){"use strict";var n=function(){var t=this.$createElement,i=this._self._c||t;return i("button",{style:this.noRound?"":"border-radius: 50vh",attrs:{type:this.type,disabled:this.loading},on:{click:this.m_emitParent}},[i("table",{staticStyle:{"margin-bottom":"0",position:"absolute"},style:this.loading?"":"visibility: hidden"},[this._m(0)]),i("span",{style:this.loading?"visibility: hidden":""},[this._v(this._s(this.title))])])};n._withStripped=!0;var e={render:n,staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("tbody",[i("tr",[i("td",{}),i("td",{staticStyle:{height:"22px","text-align":"center","vertical-align":"middle"}},[i("div",{staticClass:"icon-e e1"})]),i("td",{staticStyle:{height:"22px","text-align":"center","vertical-align":"middle"}},[i("div",{staticClass:"icon-e e2"})]),i("td",{staticStyle:{height:"22px","text-align":"center","vertical-align":"middle"}},[i("div",{staticClass:"icon-e e3"})]),i("td",{})])])}]};i.a=e},uFzi:function(t,i,a){"use strict";var n=a("JwKv");i.a={middleware:"clientIsManager",head:function(){return{title:"Thêm mới cửa hàng - Quản lý - Spadi.vn"}},props:{nobox:{type:Boolean,value:!1}},components:{PriBtn:n.a},name:"shopcreate",data:function(){return{v:{listCity:[],markers:[{position:{}}],yourAddress:[],gzoom:10,dialogListName:!1,isLoading:!1,active:0,currentHref:""},form:{addShop:{_inputHotline:"",_inputPhone:"",name:"",address:"",phone:[],hotLine:[],city:"",district:""}}}},computed:{listDistrict:function(){var t=this.form.addShop.city.trim(),i=[];return this.v.listCity.forEach(function(a){a.name===t&&(i=a.districts)}),i.length>0&&(this.form.addShop.district=i[0]),i}},beforeMount:function(){var t=this;this.m_getListCity(),this.v.markers[0].position=this.$store.state.currentLocation,this.EB.$on("updateCurrentLocation",function(i){t.v.markers[0].position=t.$store.state.currentLocation}),this.m_getShopInfoById()},methods:{m_getShopInfoById:function(){var t=this;this.$http.get("http://192.168.31.199:8000/api/shop/detail?_id="+this.$route.query._,this.cf()).then(function(i){t.form.addShop=i.body,t.form.addShop._inputHotline="",t.form.addShop._inputPhone=""}).catch(function(t){})},m_getInfoCurrentLocation:function(){var t=this;this.$http.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.v.markers[0].position.lat+","+this.v.markers[0].position.lng+"&sensor=false&key=AIzaSyBhZ4W7j3Xlo-UOlY7yTQjUc0GPJwr9d0k").then(function(i){void 0!==i.body.results&&(t.v.yourAddress=i.body.results,t.v.dialogListName=!0)}).catch(function(t){})},m_removePhoneIndex:function(t){this.form.addShop.phone=this.form.addShop.phone.map(function(i,a){return a!==t?i:void 0})},m_addPhone:function(){var t=this,i=!1;this.form.addShop._inputPhone.length<3||(this.form.addShop.phone.length>0&&this.form.addShop.phone.forEach(function(a){void 0!==a&&a.toString().split(" ").join("")===t.form.addShop._inputPhone.toString().split(" ").join("")&&(i=!0)}),i?this.$message({message:"Số điện thoại đã tồn tại, vui lòng kiểm tra lại!",type:"error"}):(this.form.addShop.phone.push(this.form.addShop._inputPhone),this.form.addShop._inputPhone=""))},m_removeHotlineIndex:function(t){this.form.addShop.hotLine=this.form.addShop.hotLine.map(function(i,a){return a!==t?i:void 0})},m_addHotline:function(){var t=this,i=!1;this.form.addShop._inputHotline.length<3||(this.form.addShop.hotLine.length>0&&this.form.addShop.hotLine.forEach(function(a){void 0!==a&&a.toString().split(" ").join("")===t.form.addShop._inputHotline.toString().split(" ").join("")&&(i=!0)}),i?this.$message({message:"Đường dây nóng đã tồn tại, vui lòng kiểm tra lại!",type:"error"}):(this.form.addShop.hotLine.push(this.form.addShop._inputHotline),this.form.addShop._inputHotline=""))},m_getListCity:function(){var t=this;this.$http.get("http://192.168.31.199:8000/api/city/list").then(function(i){t.v.listCity=i.body,t.v.listCity.length>0&&(t.form.addShop.city=t.v.listCity[0].name)}).catch(function(t){})},submitAddShop:function(t){var i=this;t.preventDefault(),this.v.isLoading=!0;var a=this.form.addShop;delete a._inputPhone,delete a._inputHotline,a.latitude=this.v.markers[0].position.lat,a.longitude=this.v.markers[0].position.lng,a.chain=this.$store.state.adminSelectedChain._id,this.$http.post("http://192.168.31.199:8000/api/shop/create",a,this.cf()).then(function(t){i.v.isLoading=!1,i.EB.$emit("reloadListShop"),i.v.active=5;var a=document.querySelector(".svg");if(null!=a){var n=a.innerHTML;a.innerHTML=n}}).catch(function(t){i.v.isLoading=!1,i.$message({type:"error",message:void 0!==t.body&&void 0!==t.body.ErrorMessage?t.body.ErrorMessage:"Đã xảy ra sự cố, vui lòng kiểm tra và thử lại sau"})})},m_gmapUpdatePostion:function(t){},m_gmapDragEnd:function(t){this.v.markers[0].position={lat:t.latLng.lat(),lng:t.latLng.lng()}}}}},w7sp:function(t,i,a){"use strict";var n=function(){var t=this,i=this,a=i.$createElement,n=i._self._c||a;return n("div",{staticStyle:{padding:"10px","background-color":"white"}},[n("p",{staticStyle:{"font-size":"18px","padding-right":"20px"}},[i._v("CẬP NHẬT THÔNG TIN CHI NHÁNH")]),n("div",{staticClass:"container-fluid",staticStyle:{"background-color":"white",padding:"40px"}},[n("form",{on:{submit:function(t){i.submitAddShop(t)}}},[n("el-row",{attrs:{gutter:20}},[5!==i.v.active?n("el-col",{attrs:{md:6}},[n("div",{staticStyle:{height:"200px"}},[n("el-steps",{attrs:{direction:"vertical",active:i.v.active,"finish-status":"success","align-center":""}},[n("el-step",{attrs:{title:"Đặt tên shop"}}),n("el-step",{attrs:{title:"Đường dây nóng"}}),n("el-step",{attrs:{title:"Google Maps"}}),n("el-step",{attrs:{title:"Vị trí"}}),n("el-step",{attrs:{title:"Hoàn tất"}})],1)],1)]):i._e(),n("el-col",{attrs:{md:18}},[n("div",{staticStyle:{margin:"auto"}},[0===i.v.active?[n("label",[i._v("Tên hiển thị")]),n("el-input",{model:{value:i.form.addShop.name,callback:function(t){i.$set(i.form.addShop,"name",t)},expression:"form.addShop.name"}}),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{staticClass:"pull-right",on:{click:function(){t.form.addShop.name.trim().length<6?t.$message({type:"warning",message:"Tên cửa hàng quá ngắn, vui lòng kiếm tra."}):t.v.active++}}},[i._v("Tiếp theo"),n("span",{staticClass:"el-icon-arrow-right"})])],1)]:i._e(),1===i.v.active?[n("el-tabs",{staticStyle:{"margin-top":"10px"}},[n("el-tab-pane",{attrs:{label:"Điện thoại"}},[i._l(i.form.addShop.phone,function(t,a){return[void 0!==t?n("el-row",{staticStyle:{"margin-bottom":"8px"},attrs:{gutter:20}},[n("el-col",{attrs:{md:20,xs:18}},[n("el-input",{attrs:{placeholder:"Nhập số điện thoại",value:t,disabled:""}},[n("i",{staticClass:"el-input__icon el-icon-phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-col",{attrs:{md:4,xs:6}},[n("el-tooltip",{attrs:{content:"Xóa số điện thoại này",placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){i.m_removePhoneIndex(a)}}})],1)],1)],1):i._e()]}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:20,xs:18}},[n("el-input",{attrs:{placeholder:"Nhập số điện thoại"},model:{value:i.form.addShop._inputPhone,callback:function(t){i.$set(i.form.addShop,"_inputPhone",t)},expression:"form.addShop._inputPhone"}},[n("i",{staticClass:"el-input__icon el-icon-phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-col",{attrs:{md:4,xs:6}},[n("el-tooltip",{attrs:{placement:"top",content:"Xác nhận số điện thoại"}},[n("el-button",{attrs:{icon:"el-icon-check"},on:{click:i.m_addPhone}})],1)],1)],1)],2),n("el-tab-pane",{attrs:{label:"Đường dây nóng"}},[i._l(i.form.addShop.hotLine,function(t,a){return[n("el-row",{staticStyle:{"margin-bottom":"8px"},attrs:{gutter:20}},[n("el-col",{attrs:{md:20,xs:18}},[n("el-input",{attrs:{value:t,disabled:""}},[n("i",{staticClass:"el-input__icon el-icon-phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-col",{attrs:{md:4,xs:6}},[n("el-tooltip",{attrs:{content:"Xóa số điện thoại này",placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){i.m_removeHotlineIndex(a)}}})],1)],1)],1)]}),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:20,xs:18}},[n("el-input",{attrs:{placeholder:"Nhập đường dây nóng"},model:{value:i.form.addShop._inputHotline,callback:function(t){i.$set(i.form.addShop,"_inputHotline",t)},expression:"form.addShop._inputHotline"}},[n("i",{staticClass:"el-input__icon el-icon-phone",attrs:{slot:"prefix"},slot:"prefix"})])],1),n("el-col",{attrs:{md:4,xs:6}},[n("el-tooltip",{attrs:{placement:"top",content:"Xác nhận đường dây nóng"}},[n("el-button",{attrs:{icon:"el-icon-check"},on:{click:i.m_addHotline}})],1)],1)],1)],2)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{staticClass:"pull-left",on:{click:function(t){i.v.active--}}},[n("span",{staticClass:"el-icon-arrow-left"}),i._v("Quay lại\n                                ")]),n("el-button",{staticClass:"pull-right",on:{click:function(t){i.v.active++}}},[i._v("Tiếp theo "),n("span",{staticClass:"el-icon-arrow-right"})])],1)]:i._e(),2===i.v.active?[n("label",{staticStyle:{"margin-top":"10px"}},[i._v("Địa điểm mọi người có thể tìm thấy bạn")]),n("div",{staticStyle:{height:"400px",position:"relative"}},[n("div",{staticStyle:{position:"absolute","z-index":"1999"}},[n("button",{staticClass:"gmap-button-pickCurrentLocation",attrs:{type:"button"},on:{click:function(t){i.EB.$emit("getCurrentLocation"),i.v.gzoom=17}}},[n("span",{staticClass:"el-icon-location"}),i._v("\n                                        VỊ TRÍ HIỆN TẠI\n                                    ")]),i.nobox?i._e():n("button",{staticClass:"gmap-button-pickCurrentLocation",staticStyle:{"margin-left":"10px",color:"black"},attrs:{type:"button"},on:{click:i.m_getInfoCurrentLocation}},[n("span",{staticClass:"el-icon-info"}),i._v("\n                                        THÔNG TIN KHU VỰC\n                                    ")])]),n("gmap-map",{staticStyle:{width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},attrs:{center:i.$store.state.currentLocation,zoom:i.v.gzoom}},i._l(i.v.markers,function(t,a){return n("gmap-marker",{key:a,attrs:{position:t.position,clickable:!0,draggable:!0},on:{dragend:i.m_gmapDragEnd}})}))],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{staticClass:"pull-left",on:{click:function(t){i.v.active--}}},[n("span",{staticClass:"el-icon-arrow-left"}),i._v("Quay lại\n                                ")]),n("el-button",{staticClass:"pull-right",on:{click:function(t){i.v.active++}}},[i._v("Tiếp theo "),n("span",{staticClass:"el-icon-arrow-right"})])],1)]:i._e(),3===i.v.active?[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12}},[n("label",[i._v("Thành phố")]),n("br"),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn thành phố",filterable:"","no-data-text":"Không có dữ liệu","no-match-text":"Không có dữ liệu phù hợp"},model:{value:i.form.addShop.city,callback:function(t){i.$set(i.form.addShop,"city",t)},expression:"form.addShop.city"}},i._l(i.v.listCity,function(t){return n("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1),n("el-col",{attrs:{md:12}},[n("label",[i._v("Quận huyện")]),n("br"),n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Chọn quận, huyện","no-match-text":"Không có dữ liệu phù hợp","no-data-text":"Không có dữ liệu"},model:{value:i.form.addShop.district,callback:function(t){i.$set(i.form.addShop,"district",t)},expression:"form.addShop.district"}},i._l(i.listDistrict,function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1),n("label",{staticStyle:{"margin-top":"10px"}},[i._v("Địa chỉ chi tiết")]),n("el-input",{model:{value:i.form.addShop.address,callback:function(t){i.$set(i.form.addShop,"address",t)},expression:"form.addShop.address"}}),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{staticClass:"pull-left",on:{click:function(t){i.v.active--}}},[n("span",{staticClass:"el-icon-arrow-left"}),i._v("Quay lại\n                                ")]),n("grebtn",{staticClass:"pull-right",staticStyle:{"max-width":"200px"},attrs:{title:"Lưu thông tin",loading:i.v.isLoading,type:"submit"}})],1)]:i._e(),5===i.v.active?[n("div",[n("div",{staticClass:"svg pull-left"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",viewBox:"-263.5 236.5 26 26"}},[n("g",{staticClass:"svg-success"},[n("circle",{attrs:{cx:"-250.5",cy:"249.5",r:"12"}}),n("path",{attrs:{d:"M-256.46 249.65l3.9 3.74 8.02-7.8"}})])])]),n("div",{staticClass:"pull-left",staticStyle:{"padding-left":"10px"}},[n("p",{staticStyle:{"font-size":"24px"}},[i._v("Lưu thành công thông tin cửa hàng chi nhánh")]),n("p",[i._v("Bạn có thể quản lý shop của mình trong phần "),n("a",{staticStyle:{color:"#FF5151","text-decoration":"underline"},attrs:{href:"javacript:;"},on:{click:function(t){i.$router.push("/tai-khoan/shop/danh-sach")}}},[n("span",{staticClass:"material-icons",staticStyle:{"font-size":"16px"}},[i._v("store_mall_directory")]),i._v("\n                                        Cửa hàng")]),n("br"),i._v("Hoặc nhấn\n                                        "),n("a",{staticStyle:{color:"#FF5151","text-decoration":"underline"},attrs:{href:"javascript:;"},on:{click:function(){t.form.addShop.name="",t.v.active=0}}},[i._v("vào đây ")]),i._v("để tạo\n                                        thêm cửa hàng\n                                    ")])])])]:i._e()],2)])],1)],1)]),n("el-dialog",{attrs:{visible:i.v.dialogListName,top:"0px"},on:{"update:visible":function(t){i.$set(i.v,"dialogListName",t)}}},[n("div",[n("table",{staticClass:"table"},[n("tbody",i._l(i.v.yourAddress,function(t){return n("tr",[n("td",[n("span",{staticClass:"el-icon-location"})]),n("td",[i._v(i._s(t.formatted_address))]),n("td",[n("el-tooltip",{attrs:{placement:"right",content:"Nhấn để sao chép"}},[n("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.formatted_address,expression:"item.formatted_address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){i.$message({type:"success",message:"Sao chép thành công vào bộ nhớ"})},expression:"()=>{$message({type:'success',message:'Sao chép thành công vào bộ nhớ'});}",arg:"success"}],staticClass:"material-icons button-icon-copy"},[i._v("content_copy")])])],1)])}))])])])],1)};n._withStripped=!0;var e={render:n,staticRenderFns:[]};i.a=e}});