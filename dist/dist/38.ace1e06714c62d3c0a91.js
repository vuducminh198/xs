webpackJsonp([38],{"+bpR":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("xH+J"),i=e("g9mn"),o=!1;var r=function(t){o||e("lfO5")},s=e("VU/8")(a.a,i.a,!1,r,"data-v-24cd859c",null);s.options.__file="pages\\index\\tai-khoan\\dang-nhap.vue",n.default=s.exports},aFFn:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,".buttonLogin[data-v-24cd859c]{background-color:#4caf50;width:100%;padding:8px;border:0;color:#fff;font-family:Open Sans}.buttonLogin[data-v-24cd859c]:hover{opacity:.96}label[data-v-24cd859c]:hover{text-decoration:unset}",""])},g9mn:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"text-align:center; padding-top:40px;"},[e("div",{staticClass:"box",staticStyle:{padding:"20px","max-width":"450px","min-height":"200px",margin:"auto","margin-top":"40px"}},[e("p",{staticStyle:{"font-size":"24px"}},[t._v("ĐĂNG NHẬP")]),e("span",{staticStyle:{"font-size":"14px"}},[t._v("Điền đầy đủ thông tin *."),e("br"),t._v(" Nếu bạn chưa có tài khoản, nhấn "),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"javascript:;"},on:{click:function(n){t.$router.push("/tai-khoan/dang-ky")}}},[t._v("vào đây")])]),t._v("\n        để đăng ký\n        "),e("form",{staticStyle:{"margin-top":"30px"},on:{submit:function(n){t.m_tryLogin(n)}}},[e("label",{staticStyle:{"font-weight":"bold"}},[t._v("Tài khoản *")]),e("el-input",{model:{value:t.form.login.email,callback:function(n){t.$set(t.form.login,"email",n)},expression:"form.login.email"}},[e("i",{staticClass:"el-input__icon el-icon-message",attrs:{slot:"prefix"},slot:"prefix"})]),e("label",{staticStyle:{"margin-top":"15px","font-weight":"bold"}},[t._v("Mật khẩu *")]),e("el-input",{attrs:{type:"password"},model:{value:t.form.login.password,callback:function(n){t.$set(t.form.login,"password",n)},expression:"form.login.password"}},[e("i",{staticClass:"el-input__icon el-icon-edit",attrs:{slot:"prefix"},slot:"prefix"})]),e("div",{staticStyle:{height:"30px","margin-top":"20px","margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"14px"}},[e("el-checkbox",{staticClass:"pull-left",model:{value:t.v.saveAccount,callback:function(n){t.$set(t.v,"saveAccount",n)},expression:"v.saveAccount"}}),t._v(" Nhớ tài khoản")],1),e("a",{staticClass:"pull-right",attrs:{href:"javascript:;"},on:{click:function(n){t.$router.push("/tai-khoan/quen-mat-khau")}}},[t._v("Quên mật\n                    khẩu?")])]),e("grebtn",{attrs:{title:"ĐĂNG NHẬP",type:"submit",loading:t.v.isLoading}}),e("br"),e("label",{staticStyle:{"margin-top":"20px","font-weight":"bold"}},[t._v("Đăng nhập bằng")]),e("div",[t._v("\n                .etc\n            ")])],1)])])};a._withStripped=!0;var i={render:a,staticRenderFns:[]};n.a=i},lfO5:function(t,n,e){var a=e("aFFn");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("273b4b4c",a,!1)},"xH+J":function(t,n,e){"use strict";var a=e("Xxa5"),i=e.n(a),o=e("exGp"),r=e.n(o),s=e("4MaG"),c=e.n(s);n.a={middleware:"checkLoginClient",head:function(){return{title:"Đăng nhập | Spadi.vn - Trang đăng nhập tại Spadi.vn"}},name:"dang-nhap",asyncData:function(){return{}},data:function(){return{v:{saveAccount:!1,isLoading:!1},form:{login:{email:"",password:""}}}},methods:{m_tryLogin:function(t){var n=this;t.preventDefault(),this.v.isLoading=!0,this.$http.post("http://spadi.com.vn/api/user/authenticate",this.form.login,{headers:{"Content-Type":"application/json"}}).then(function(t){n.v.isLoading=!1;var e,a=t.body;if("user"===a.role||"manager"===a.role){var o={name:a.name,email:a.email,role:a.role};n.setCookie("ClientRole",a.role),n.setCookie("ClientToken",a.token),c.a.encode("spadivn_x",o,(e=r()(i.a.mark(function t(e,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=8;break}return n.setCookie("ClientInfo",r),t.next=4,n.$store.commit("updateClientToken",a.token);case 4:return t.next=6,n.$store.commit("updateClientInfo",o);case 6:return t.next=8,n.$store.commit("updateClientRole",a.role);case 8:case"end":return t.stop()}},t,n)})),function(t,n){return e.apply(this,arguments)})),n.$router.push(n.$route.query.redirect||"/tai-khoan/")}}).catch(function(t){n.v.isLoading=!1,n.$message({type:"error",message:void 0!==t.body&&void 0!==t.body.ErrorMessage?t.body.ErrorMessage:"Đã xảy ra sự cố, vui lòng kiểm tra và thử lại sau"})})}}}}});