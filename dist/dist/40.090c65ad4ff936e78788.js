webpackJsonp([40],{"/TV4":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("cDcc"),a=i("Etal"),o=!1;var s=function(t){o||i("ybzz")},l=i("VU/8")(n.a,a.a,!1,s,null,null);l.options.__file="pages\\index\\dia-diem\\index.vue",e.default=l.exports},Etal:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-3 col-sm-4"},[i("div",{staticStyle:{"background-color":"white",padding:"20px"}},[i("el-input",{attrs:{placeholder:"Nhập Coupon, Deal, v.v",clearable:""},model:{value:t.v.keyword,callback:function(e){t.$set(t.v,"keyword",e)},expression:"v.keyword"}}),i("label",{staticClass:"bold"},[t._v("Tìm kiếm theo")]),i("br"),i("el-radio",{attrs:{label:"B"},model:{value:t.v.typeSelect,callback:function(e){t.$set(t.v,"typeSelect",e)},expression:"v.typeSelect"}},[i("span",{staticStyle:{color:"black!important","font-family":"'Open Sans'","font-size":"14px"}},[t._v("Vị trí hiện tại")])]),i("br"),i("el-radio",{attrs:{label:"A"},model:{value:t.v.typeSelect,callback:function(e){t.$set(t.v,"typeSelect",e)},expression:"v.typeSelect"}},[i("span",{staticStyle:{color:"black!important","font-family":"'Open Sans'","font-size":"14px"}},[t._v("Theo quận / huyện")])]),i("div",{staticStyle:{clear:"both","margin-top":"10px"}}),"B"===t.v.typeSelect?void 0:[i("label",{staticClass:"bold"},[t._v("Tỉnh / Thành phố")]),i("br"),i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Chọn thành phố","no-data-text":"Không có dữ liệu","no-match-text":"Không có dữ liệu phù hợp"},model:{value:t.v.selectedCity,callback:function(e){t.$set(t.v,"selectedCity",e)},expression:"v.selectedCity"}},t._l(t.v.listCity,function(t){return i("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),i("br"),i("label",{staticClass:"bold"},[t._v("Quận / Huyện")]),i("br"),i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Chọn quận huyện","no-data-text":"Không có dữ liệu","no-match-text":"Không có dữ liệu phù hợp"},model:{value:t.v.selectedDistrict,callback:function(e){t.$set(t.v,"selectedDistrict",e)},expression:"v.selectedDistrict"}},t._l(t.c_listDistricts,function(t){return i("el-option",{key:t,attrs:{value:t,label:t}})}))],i("label",{staticClass:"bold",staticStyle:{"margin-top":"20px"}},[t._v("Tôi muốn tìm")]),i("br"),i("el-radio",{attrs:{label:"all"},model:{value:t.v.selectedTypeObject,callback:function(e){t.$set(t.v,"selectedTypeObject",e)},expression:"v.selectedTypeObject"}},[t._v("Tất cả")]),i("br"),i("el-radio",{attrs:{label:"deal"},model:{value:t.v.selectedTypeObject,callback:function(e){t.$set(t.v,"selectedTypeObject",e)},expression:"v.selectedTypeObject"}},[t._v("Chỉ Deal")]),i("br"),i("el-radio",{attrs:{label:"coupon"},model:{value:t.v.selectedTypeObject,callback:function(e){t.$set(t.v,"selectedTypeObject",e)},expression:"v.selectedTypeObject"}},[t._v("Chỉ Coupon")]),i("br"),i("div",{staticClass:"text-right",staticStyle:{"margin-top":"15px"}},[i("button",{staticClass:"btn",on:{click:function(e){t.m_getInfoCurrentLocation()}}},[t._v("Tìm kiếm")])])],2)]),i("div",{staticClass:"col-sm-8 col-md-9",staticStyle:{position:"relative"}},["B"===t.v.typeSelect?[!1===t.v.mapExpanded?[i("div",{staticStyle:{width:"100%","background-color":"white",padding:"10px","padding-top":"15px","padding-bottom":"15px","font-size":"14px","font-family":"'Open Sans'"}},[t._v("\n                        Kéo đến vị trí hoặc sử dụng "),i("a",{staticStyle:{color:"#439A46","text-decoration":"underline"},attrs:{href:"javascript:;"},on:{click:function(e){t.m_getCurrentLocation()}}},[t._v("vị trí hiện\n                        tại")]),t._v("\n                        của bạn để tìm kiếm nhanh, chính xác hơn"),i("br")]),i("div",{staticStyle:{position:"relative",height:"500px"}},[i("gmap-map",{staticStyle:{width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},attrs:{center:t.v.currentLocation,zoom:t.v.zoomlevel}},[i("gmap-marker",{attrs:{position:t.v.currentLocation,draggable:!0},on:{dragend:t.m_dragEndMaker}})],1)],1)]:[i("button",{staticStyle:{"font-size":"13px","box-shadow":".5px .5px rgba(45,45,48,.2)","background-color":"white",padding:"8px 20px","font-family":"'Open Sans'",border:"0"},on:{click:function(e){t.v.mapExpanded=!1}}},[t._v("\n                        MỞ BẢN ĐỒ\n                        "),i("span",{staticClass:"el-icon-arrow-right"})]),i("div",{staticStyle:{clear:"both"}})]]:t._e(),t.v.keyword.trim().length>0?i("p",{staticClass:"bold",staticStyle:{"font-family":"'Source Sans Pro'"}},[t._v("Hiển thị kết quả cho từ khóa: "+t._s(t.v.keyword))]):t._e(),"all"===t.v.selectedTypeObject||"deal"===t.v.selectedTypeObject?i("div",{staticStyle:{"margin-top":"20px"}},[t.v.listDeal.length>0?i("label",{staticStyle:{"font-size":"24px","padding-left":"5px"}},[t._v("DEAL")]):t._e(),i("a",{staticClass:"greenLink",attrs:{href:"javascript:;"},on:{click:function(e){t.$router.push("/deal")}}},[t._v("Tất cả")]),i("br"),i("div",t._l(t.c_listDeal,function(e){return i("div",{staticClass:"col-md-3 col-sm-6 col-xs-6",staticStyle:{"padding-left":"0px","padding-right":"5px"}},[i("div",{staticStyle:{"background-color":"white",width:"100%","min-height":"100px","margin-bottom":"15px"}},[i("div",{staticStyle:{"border-top":"0px","text-overflow":"ellipsis","border-radius":"0","background-color":"white"}},[i("div",{style:"width:100%; height:140px; background-size:cover; background-image:url("+(t.img_base+e.images[0])+"); position:relative"}),i("div",{staticStyle:{padding:"10px"}},[i("div",{staticClass:"mxLinkClass",staticStyle:{"font-family":"'Open Sans'",overflow:"hidden","text-overflow":"ellipsis","max-height":"44px",height:"44px"},on:{click:function(i){t.$router.push("/deal/"+e.slug)}}},[t._v("\n                                        "+t._s(t.sortText(e.title,38))+"\n                                    ")]),i("br"),i("span",[i("span",{staticStyle:{color:"#ff5722","flex-flow":"row nowrap","align-items":"baseline","font-size":"2rem","font-weight":"700","font-family":"'Open Sans'"}},[t._v(t._s(t._f("VN")(t.finalPrice(e))))]),t._v(" \n                            "),i("strike",[i("span",{staticStyle:{"font-family":"'Open Sans'"}},[t._v(t._s(t._f("VN")(e.price)))])])],1),i("table",{staticClass:"table",staticStyle:{padding:"0",margin:"0"}},[i("tbody",{staticStyle:{margin:"0",padding:"0"}},[i("tr",{staticStyle:{margin:"0",padding:"0"}},[t._m(0,!0),i("td",{staticStyle:{border:"0",width:"42px",margin:"0",padding:"0","text-align":"center"}},[i("button",{staticClass:"buttonAddCart",on:{click:function(i){t.EB.$emit("updateCart",e._id)}}},[i("span",{staticClass:"el-icon-goods"})])])])])])])])])])})),i("div",{staticStyle:{clear:"both"}}),"all"===t.v.selectedTypeObject||"coupon"===t.v.selectedTypeObject?i("div",{staticStyle:{"margin-top":"20px"}},[t.v.listCoupon.length>0?i("label",{staticStyle:{"font-size":"24px","padding-left":"5px"}},[t._v("COUPON")]):t._e(),i("a",{staticClass:"greenLink",attrs:{href:"javascript:;"},on:{click:function(e){t.$router.push("/coupon")}}},[t._v("Tất\n                    cả")]),i("br"),i("div",t._l(t.c_listCoupon,function(e){return i("div",{staticClass:"col-md-3 col-sm-6 col-xs-6",staticStyle:{"padding-left":"7.5px","padding-right":"7.5px"}},[i("div",{staticStyle:{"border-top":"0px","padding-bottom":"0","text-overflow":"ellipsis","border-radius":"0","background-color":"white"}},[i("div",{style:"width:100%; height:180px; background-size:cover; background-image:url("+(t.img_base+e.images[0])+"); position:relative"}),i("div",{staticStyle:{padding:"15px","padding-bottom":"0"}},[i("span",{staticStyle:{"margin-top":"5px"}},[i("span",{staticClass:"fa fa-clock-o"}),i("time-count-down",{attrs:{to:e.to}})],1),i("div",{staticStyle:{"font-size":"18px","max-height":"50px",height:"50px","text-overflow":"ellipsis",overflow:"hidden"}},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")])]),i("div",{staticStyle:{"margin-top":"8px"}},[i("btn-code",{attrs:{title:"XEM"},on:{click:function(i){t.$router.push("/coupon/"+e.slug)}}})],1)])])})),i("div",{staticStyle:{clear:"both"}})]):t._e()]):t._e()],2)])])};n._withStripped=!0;var a={render:n,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{border:"0",margin:"0",padding:"0"}},[e("div",{staticClass:"pull-left rateStar"},[e("span",{staticClass:"fa fa-star"}),e("span",{staticClass:"fa fa-star"}),e("span",{staticClass:"fa fa-star"}),e("span",{staticClass:"fa fa-star"}),e("span",{staticClass:"fa fa-star"}),e("br"),e("span",{staticStyle:{"font-size":"10px","font-family":"'Open Sans'"}},[this._v("  (1502 đánh giá)")])])])}]};e.a=a},cDcc:function(t,e,i){"use strict";var n=i("mvHQ"),a=i.n(n);e.a={scrollToTop:!0,name:"diadiem-trangchu",head:function(){return{title:"Tìm kiếm địa điểm | Spadi.vn"}},data:function(){return{v:{typeSelect:"B",Distance:100,currentLocation:this.$store.state.currentLocation,zoomlevel:10,selectedCity:"",selectedDistrict:"",listCity:[],listChainInArea:[],selectedTypeObject:"all",listCoupon:[],listDeal:[],mapExpanded:!1,keyword:""},form:{}}},computed:{c_listDistricts:function(){var t=this.v.selectedCity,e=[];return this.v.listCity.forEach(function(i){i.name===t&&(e=i.districts)}),e.length>0&&(this.v.selectedDistrict=e[0]),e},c_listDeal:function(){var t=this,e=this.CreateSlug(this.v.keyword.trim());if(0===e.length)return this.v.listDeal;var i=[];return this.v.listDeal.forEach(function(n){-1!==t.CreateSlug(n.title).indexOf(e)&&i.push(n)}),i},c_listCoupon:function(){var t=this,e=this.CreateSlug(this.v.keyword.trim());if(0===e.length)return this.v.listCoupon;var i=[];return this.v.listCoupon.forEach(function(n){-1!==t.CreateSlug(n.title).indexOf(e)&&i.push(n)}),i}},beforeMount:function(){this.v.currentLocation=JSON.parse(a()(this.$store.state.currentLocation)),this.m_getListCity()},methods:{m_getCurrentLocation:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.onPositionReceived)},onPositionReceived:function(t){var e=this;this.v.currentLocation={lat:t.coords.latitude,lng:t.coords.longitude},this.setCookie("currentLocation",a()(this.v.currentLocation)),this.$http.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.v.currentLocation.lat+","+this.v.currentLocation.lng+"&sensor=false&key="+this.GMAPKEY()).then(function(t){if(void 0!==t.body.results){var i=t.body.results[0].address_components,n=i[i.length-3].long_name,a=i[i.length-2].long_name;e.v.selectedCity=a,e.c_listDistricts.forEach(function(t){-1!==t.indexOf(n)&&(e.v.selectedDistrict=t)})}}).catch(function(t){}),this.v.zoomlevel=16},m_usingCurrentLocation:function(){var t=this;this.$http.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+this.v.currentLocation.lat+","+this.v.currentLocation.lng+"&sensor=false&key="+this.GMAPKEY()).then(function(e){if(void 0!==e.body.results){var i=e.body.results[0].address_components,n=i[i.length-3].long_name,a=i[i.length-2].long_name;t.v.selectedCity=a,t.c_listDistricts.forEach(function(e){-1!==e.indexOf(n)&&(t.v.selectedDistrict=e)}),t.m_usingCityAndDistrict()}}).catch(function(t){})},m_usingCityAndDistrict:function(){var t=this,e={city:this.v.selectedCity,district:this.v.selectedDistrict};this.$http.post("http://spadi.com.vn/api/search/address",e).then(function(e){t.v.listCoupon=e.body.coupon,t.v.listDeal=e.body.deal,t.v.mapExpanded=!0}).catch(function(t){console.log(t)})},m_dragEndMaker:function(t){this.v.currentLocation={lat:t.latLng.lat(),lng:t.latLng.lng()}},m_getInfoCurrentLocation:function(){"A"===this.v.typeSelect?this.m_usingCityAndDistrict():this.m_usingCurrentLocation()},m_getListCity:function(){var t=this;this.$http.get("http://spadi.com.vn/api/city/list").then(function(e){t.v.listCity=e.body,t.v.listCity.length>0&&(t.v.selectedCity=t.v.listCity[0].name)}).catch(function(t){})}}}},htzx:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'.ChainRow td{padding-bottom:10px}.ul_button{list-style-type:none;margin-top:10px;visibility:hidden}.ul_button li{display:inline-block}.ul_button li a{color:#000;font-family:Source Sans Pro;font-size:16x}.ul_button li a:hover{color:#439a46;text-decoration:underline}.ChainRow:hover .ul_button{visibility:visible}.greenLink{color:#439a46}.greenLink:hover{text-decoration:underline}.buttonAddCart{width:40px;height:40px;border:0;background-color:rgba(45,45,48,.1);border-radius:50vh}.buttonAddCart:hover{background-color:#439a46}.buttonAddCart:hover span{color:#fff}.buttonAddCart span{font-size:24px}.rateStar .fa-star{color:#fceb12;font-size:16px}.buttonFlat{color:rgba(45,45,48,.4);cursor:pointer;text-align:center;font-size:18px}.buttonFlat:hover{color:#2d2d30}.text-head{font-family:Open Sans,Helvetica,Arial,sans-serif;font-size:18px;font-weight:700}.headText{font-family:Open Sans;position:relative;margin-top:0;font-weight:600;line-height:1.2;color:#4a4a4a}.headText:before{position:absolute;content:"";bottom:-14.4px;bottom:-.9rem;left:-27.2px;left:-1.7rem;width:50px;height:1px;background-color:#dadada}.shopSmall{border:3px solid #fff;width:80px;height:80px;background-size:cover;margin:20px;position:absolute}.shopSmallName{color:#fff;font-family:Open Sans;margin-left:20px;margin-top:110px;font-size:24px;position:absolute}.mxLinkClass:hover{text-decoration:underline;cursor:pointer}',""])},ybzz:function(t,e,i){var n=i("htzx");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("37dd7b18",n,!1)}});