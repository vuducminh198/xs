webpackJsonp([42],{M2cN:function(t,a,e){"use strict";var i=function(){var t=this,a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"container",staticStyle:{"margin-top":"20px"}},[typeof a.comment.length>0?i("div",{staticClass:"box",staticStyle:{padding:"20px"}},[a._m(0)]):void 0!==a.mainData?i("div",[i("div",{staticClass:"row"},[i("div",{staticStyle:{"font-size":"36px",padding:"20px","font-family":"'Open Sans'"}},[a._v(a._s(a.mainData.title))]),i("div",{staticClass:"col-sm-8"},[i("div",{staticClass:"box",staticStyle:{border:"0","box-shadow":"unset","border-radius":"0"}},[i("el-carousel",{attrs:{interval:5e3,height:"500px",arrow:"always"}},a._l(a.mainData.images,function(t){return i("el-carousel-item",{key:t},[i("img",{staticStyle:{width:"100%"},attrs:{src:a.img_base+t}})])})),i("div",{staticStyle:{padding:"20px","border-radius":"0"}},[i("span",{staticStyle:{"font-size":"36px","font-family":"'Open Sans'"}},[a._v(a._s(a.mainData.title))]),i("hr",{staticStyle:{"border-style":"dot-dot-dash"}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-3"},[i("div",{staticClass:"fb-like",attrs:{"data-href":a.v.currentHref,"data-layout":"button_count","data-action":"like","data-size":"small","data-show-faces":"true","data-share":"true"}}),i("br")]),i("div",{staticClass:"com-sm-6 align-option"},[i("time-count-down",{staticStyle:{"padding-right":"20px","padding-left":"20px","font-family":"'Open Sans'","font-weight":"bold","font-size":"24px"},attrs:{to:a.mainData.to}})],1)])])],1),i("div",{staticStyle:{clear:"both"}}),i("div",{staticClass:"box",staticStyle:{border:"0","box-shadow":"unset","border-radius":"0"}},[i("label",{staticClass:"lb_head",staticStyle:{margin:"20px"}},[a._v("SẢN PHẨM CÓ TẠI")]),i("div",{staticStyle:{clear:"both"}}),i("div",{staticStyle:{"min-height":"300px",position:"relative"}},[i("gmap-map",{staticStyle:{width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},attrs:{center:{lat:a.mainData.shop[0].latitude,lng:a.mainData.shop[0].longitude},zoom:14}},a._l(a.mainData.shop,function(t,e){return i("gmap-marker",{key:e,attrs:{description:"aaaaaaaaaaaaaaa",icon:{url:"/img/market.png",scaledSize:{width:46,height:50},stylers:[{"border-radius":50}]},position:{lat:t.latitude,lng:t.longitude},clickable:!0,draggable:!0},on:{click:function(e){a.center=t.position,a.m_showShopInfo(t)}}},[i("gmap-info-window",[i("table",[i("tbody",[i("tr",[i("td",[i("img",{staticStyle:{width:"40px",height:"40px","border-radius":"3px"},attrs:{src:a.img_base+t.chain.logo}})]),i("td",[i("span",{staticStyle:{"padding-left":"5px","font-weight":"bold"}},[a._v(a._s(t.chain.name)+" - "+a._s(t.name))]),i("br")])])])])])],1)}))],1)]),i("div",{staticStyle:{clear:"both"}}),i("div",[i("div",{staticClass:"cusTab"},[i("ul",[i("li",{class:1===a.v.currentTab?"mxActive":"",on:{click:function(t){a.v.currentTab=1}}},[a._v("CHI TIẾT")]),i("li",{class:2===a.v.currentTab?"mxActive":"",on:{click:function(t){a.v.currentTab=2}}},[a._v("ĐÁNH GIÁ")]),i("li",{class:3===a.v.currentTab?"mxActive":"",on:{click:function(t){a.v.currentTab=3}}},[a._v("BÌNH LUẬN")])])]),i("div",{staticStyle:{clear:"both"}}),i("div",{staticClass:"box child-container ",staticStyle:{padding:"10px","border-top":"2px solid #439A46","border-radius":"0"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===this.v.currentTab,expression:"this.v.currentTab===1"}],staticStyle:{"user-select":"none"},domProps:{innerHTML:a._s(this.mainData.content)}}),i("div",{directives:[{name:"show",rawName:"v-show",value:3===this.v.currentTab,expression:"this.v.currentTab===3"}]},[a._l(a.v.listComment,function(t){return i("div",[i("table",{staticClass:"table",staticStyle:{"padding-bottom":"0","margin-bottom":"0"}},[i("tbody",[i("tr",[a._m(1,!0),i("td",[i("span",{staticStyle:{"font-size":"14px","font-weight":"bold",color:"rgba(45,45,48,.6)"}},[a._v(a._s(t.user.name)+" - "+a._s(a._f("emailHide")(t.user.email)))]),i("br"),i("span",{staticStyle:{"font-size":"15px"}},[a._v(a._s(t.content))]),i("br"),i("span",{staticStyle:{"font-size":"13px"}},[a._v("Lúc: "+a._s(a._f("fullTimeVN")(t.createdAt)))])])])])])])}),i("div",[i("table",{staticClass:"table",staticStyle:{"padding-bottom":"0","margin-bottom":"0"}},[i("tbody",[i("tr",[a._m(2),i("td",[i("form",{on:{submit:function(t){a.m_postMessage(t)}}},[i("label",{staticClass:"bold",staticStyle:{"font-family":"'Source Sans Pro'"}},[a._v("Bình luận\n                                                    của bạn\n                                                    ("+a._s(a.form.postMessage.message.toString().length)+"/200) ~\n                                                    "+a._s(a.$store.state.ClientInfo.name))]),i("el-input",{attrs:{type:"textarea"},model:{value:a.form.postMessage.message,callback:function(t){a.$set(a.form.postMessage,"message",t)},expression:"form.postMessage.message"}}),i("div",{staticClass:"text-right",staticStyle:{"margin-top":"20px"}},[i("grebtn",{staticStyle:{padding:"10px",width:"100px"},attrs:{title:"Gửi",loading:a.v.isSending,type:"submit",icon:!0,iconClass:"fa fa-send"}})],1)],1)])])])])])],2)])])]),i("div",{staticClass:"col-sm-4"},[i("div",{staticClass:"box",staticStyle:{padding:"30px","border-top":"0px"}},[i("span",{staticStyle:{"font-family":"'Open Sans'","font-size":"13px"}},[a._v("Giới hạn số lượng!")]),i("br"),i("span",[i("span",{staticStyle:{color:"#ff5722","flex-flow":"row nowrap","align-items":"baseline","font-size":"2rem","font-weight":"700","font-family":"'Open Sans'"}},[a._v(a._s(a._f("VN")(a.finalPrice)))]),a._v("  "),i("strike",[i("span",{staticStyle:{"font-family":"'Open Sans'","font-style":""}},[a._v(a._s(a._f("VN")(a.mainData.price)))])])],1),i("grebtn",{staticStyle:{padding:"10px","margin-top":"20px"},attrs:{icon:!0,title:"THÊM VÀO GIỎ",loading:a.v.isLoading},on:{click:function(t){a.m_AddToCard()}}}),i("table",{staticClass:"table"},[i("tbody",[i("tr",[i("td",{staticStyle:{width:"33.33%"}},[i("span",{staticStyle:{"font-family":"'Open Sans'","font-size":"13px",color:"rgba(45,45,48,.6)"}},[a._v("Giá gốc")]),i("br"),i("span",{staticClass:"bold"},[a._v(a._s(a._f("VN")(a.mainData.price)))])]),i("td",{staticStyle:{width:"33.33%","text-align":"center"}},[i("span",{staticStyle:{"font-family":"'Open Sans'","font-size":"13px",color:"rgba(45,45,48,.6)"}},[a._v("Giảm")]),i("br"),"percent"===a.mainData.type?i("span",{staticClass:"bold"},[a._v(a._s(a.mainData.value)+"%")]):i("span",{staticClass:"bold"},[a._v(a._s(a._f("VN")(a.mainData.value)))])]),i("td",{staticStyle:{width:"33.33%","text-align":"right"}},[i("span",{staticStyle:{"font-family":"'Open Sans'","font-size":"13px",color:"rgba(45,45,48,.6)"}},[a._v("Tiết kiệm")]),i("br"),i("span",{staticClass:"bold"},[a._v(a._s(a._f("VN")(a.finalSave)))])])])])]),i("hr"),i("span",{staticStyle:{"font-family":"'Open Sans'","font-size":"24px"}},[a._v(a._s(a.mainData.title))]),i("share-on")],1)])])]):a._e(),i("el-dialog",{attrs:{visible:a.v.dialogImageViewer,"custom-class":"noBorder",top:"10px"},on:{"update:visible":function(t){a.$set(a.v,"dialogImageViewer",t)}}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("img",{staticStyle:{width:"100%"},attrs:{src:a.v.imageSource}})])]),i("el-dialog",{attrs:{visible:a.v.dialogShowCounpon,"custom-class":"noBorder",top:"calc(50vh - 200px)"},on:{"update:visible":function(t){a.$set(a.v,"dialogShowCounpon",t)}}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("div",{staticStyle:{padding:"10px"}},[a.v.OverCode?a._e():i("p",{staticStyle:{width:"100%","text-align":"center","font-size":"24px"}},[a._v("SỬ DỤNG MÃ COUPON BÊN\n                    DƯỚI")]),a.v.OverCode?i("p",{staticStyle:{width:"100%","text-align":"center","font-size":"24px"}},[a._v("Opps! HẾT MẤT RỒI")]):a._e(),i("br"),i("div",{staticStyle:{padding:"10px"}},[a._v("\n\n                    Chào: "+a._s(a.form.defaultUser.name)),i("br"),i("div",{staticStyle:{"margin-top":"10px","margin-bottom":"20px",border:"1px dashed rgba(45,45,48,.4)",padding:"10px"}},[i("table",{staticClass:"table",staticStyle:{margin:"0",padding:"0"}},[i("tbody",[i("tr",{staticStyle:{border:"0"}},[i("td",{staticStyle:{border:"0"}},[i("div",{staticStyle:{"background-color":"rgba(45,45,48,.1)",padding:"10px",width:"100%","font-size":"20px",color:"green"}},[a._v("\n                                        "+a._s(a.v.code)+"\n                                    ")])]),a.v.OverCode?a._e():i("td",{staticStyle:{border:"0",width:"50px"}},[i("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:a.v.code,expression:"v.code",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){t.$message({type:"success",message:"Đã sao chép mã vào bộ nhớ đệm!"})},expression:"()=>{\n    this.$message({\n    type:'success',\n    message:'Đã sao chép mã vào bộ nhớ đệm!'\n    })\n    }",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:function(){t.$message({type:"error",message:"Đã xảy ra sự cố, không thể sao chép!"})},expression:"()=>{\n    this.$message({\n    type:'error',\n    message:'Đã xảy ra sự cố, không thể sao chép!'\n    })\n    }",arg:"error"}],staticClass:"material-icons mxCopy",staticStyle:{"padding-top":"10px"}},[a._v("content_copy")])])])])])]),[i("span",{staticStyle:{"font-size":"18px","font-weight":"bold","font-family":"'Open Sans'"}},[a._v(a._s(a.mainData.title))]),i("br"),i("span",{staticStyle:{"font-size":"16px",color:"rgba(45,45,48,.6)"}},[a._v(a._s(a.mainData.description))]),i("br"),i("br"),i("span",{staticStyle:{color:"red","font-family":"'Open Sans'","margin-top":"20px"}},[i("br"),i("span",{staticClass:"fa fa-clock-o"}),a._v(" Còn "),i("time-count-down",{staticStyle:{"font-size":"18px"},attrs:{to:a.mainData.to}})],1)]],2)])])]),i("el-dialog",{attrs:{visible:a.v.dialogShowAlert},on:{"update:visible":function(t){a.$set(a.v,"dialogShowAlert",t)}}})],1)};i._withStripped=!0;var s={render:i,staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",[a("span",{staticClass:"material-icons"},[this._v("face")]),this._v("Opps! Coupon không tồn tại")])},function(){var t=this.$createElement,a=this._self._c||t;return a("td",{staticStyle:{width:"70px",margin:"0",padding:"0"}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50vh",margin:"10px"},attrs:{src:"https://www.drupal.org/files/issues/default-avatar.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("td",{staticStyle:{width:"70px",margin:"0",padding:"0"}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50vh",margin:"10px"},attrs:{src:"https://www.drupal.org/files/issues/default-avatar.png"}})])}]};a.a=s},eRIa:function(t,a,e){var i=e("rWd8");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("4b089f91",i,!1)},fAS4:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("whcw"),s=e("M2cN"),n=!1;var o=function(t){n||e("eRIa")},r=e("VU/8")(i.a,s.a,!1,o,"data-v-75d850cb",null);r.options.__file="pages\\index\\deal\\_deal.vue",a.default=r.exports},rWd8:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,'.imageClass[data-v-75d850cb]{width:100px;height:100px;background-size:cover;float:left;margin-right:5px;cursor:pointer}.cusTab ul li[data-v-75d850cb]:hover{background-color:#f5f5f5}.cusTab ul li.mxActive[data-v-75d850cb]{background-color:#439a46;color:#fff}.imgCaro[data-v-75d850cb]{width:100%;height:300px;background-size:cover}.lb_head[data-v-75d850cb]{font-size:15px;font-weight:700;text-transform:uppercase;font-family:Open Sans}.lb_head[data-v-75d850cb]:before{font-family:FontAwesome;font-size:16px;content:"\\F033";color:#439a46;padding-right:6px}.lb_head[data-v-75d850cb]:hover{text-decoration:none}label[data-v-75d850cb]{font-family:Open Sans}@media (min-width:769px){.align-option[data-v-75d850cb]{text-align:right}}.el-dialog__close[data-v-75d850cb]{color:#fff!important}.mxCopy[data-v-75d850cb]{margin-left:5px;color:rgba(45,45,48,.5);cursor:pointer}.mxCopy[data-v-75d850cb]:hover{color:#2d2d30}',""])},whcw:function(t,a,e){"use strict";var i=e("Xxa5"),s=e.n(i),n=e("exGp"),o=e.n(n),r=e("7t+N");e.n(r);a.a={scrollToTop:!0,head:function(){return{title:this.mainData.title+" | Spadi.vn",meta:[{name:"description",content:this.mainData.description},{name:"og:locale",content:"vi_VN"},{name:"og:type",content:"article"},{name:"og:title",content:this.mainData.title},{name:"og:description",content:this.mainData.description},{name:"og:url",content:this.currentURLPath},{name:"og:site_name",content:this.mainData.title},{name:"og:image",content:"http://192.168.31.199:8000/assets/upload/"+this.mainData.images[0]},{name:"og:image:width",content:"650"},{name:"og:image:height",content:"650"}]}},asyncData:function(){var t=o()(s.a.mark(function t(a){var e,i=a.app,n=(a.query,a.route,a.store),o=a.params,r=a.redirect;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===o.deal){t.next=7;break}return e={},t.next=4,i.$axios.$get("http://192.168.31.199:8000/api/deal/public/"+o.deal).then(function(t){(e=t).isError=!1}).catch(function(t){e.isError=!0,r("/deal/404")});case 4:return t.abrupt("return",{mainData:e,comment:"",currentURLPath:"123123",ClientInfo:n.state.ClientInfo});case 7:return r("/deal/404"),t.abrupt("return",{comment:"Coupon không tồn tại.",mainData:{}});case 9:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),data:function(){return{v:{dialogImageViewer:!1,currentHref:"",imageSource:"",currentTab:1,isLoading:!1,isSending:!1,dialogShowCounpon:!1,dialogGetInfoUser:!1,code:"xxxx-xxxx-xxxx-xxxx",listComment:[],dialogShowAlert:!1,OverCode:!1},form:{postMessage:{message:""},defaultUser:{name:"",phone:"",email:""}}}},computed:{finalPrice:function(){if("percent"===this.mainData.type){var t=parseInt(this.mainData.price);return t-t/100*parseInt(this.mainData.value)}return parseInt(this.mainData.price)-parseInt(this.mainData.value)},finalSave:function(){return parseInt(this.mainData.price)/100*parseInt(this.mainData.value)}},beforeMount:function(){this.v.currentHref=window.location.href},methods:{m_showShopInfo:function(t){},m_AddToCard:function(){var t=this;this.v.isLoading=!0,this.EB.$emit("updateCart",this.mainData._id),setTimeout(function(){t.v.isLoading=!1},200)},m_getListMessageOfCoupon:function(){var t=this;this.$http.get("http://192.168.31.199:8000/api/deal/comment/"+this.mainData._id).then(function(a){t.v.listComment=a.body}).catch(function(t){})},m_postMessage:function(t){var a=this;t.preventDefault();var e={_id:this.mainData._id,content:this.form.postMessage.message},i={headers:{"Content-Type":"application/json"}};"user"===this.$store.state.ClientInfo.role&&this.$store.state.ClientToken.toString().length>0&&(i.headers.Authorization="Bearer "+this.$store.state.ClientToken),this.v.isSending=!1,this.$http.post("http://192.168.31.199:8000/api/deal/comment",e,i).then(function(t){a.form.postMessage.message="",a.m_getListMessageOfCoupon(),a.$message({type:"success",message:"Bình luận của bạn đã được gửi đi!"})}).catch(function(t){a.$message({type:"error",message:void 0!==t.body&&void 0!==t.body.ErrorMessage?t.body.ErrorMessage:"Đã xảy ra sự cố, vui lòng kiểm tra và thử lại sau"})})}}}}});